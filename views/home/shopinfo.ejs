<link rel="stylesheet" href="http://cache.amap.com/lbs/static/main.css?v=1.0"/>
<script type="text/javascript"
            src="http://webapi.amap.com/maps?v=1.3&key=ebb3310e602e7027987911af5e30be56"></script>

<div id='toolbar' style='font-size:2em'>
	    <button type="button" class="btn btn-primary">店铺信息修改</button>&nbsp;
	    <button type="button" class="btn btn-primary">关停店铺</button>&nbsp;
	    <button type="button" class="btn btn-primary">店铺搬家</button>
</div>
<div id="mapContainer" style='margin-top:86px;margin-left:12px;width:100%;height:600px'></div>
<script>
	//初始化地图对象，加载地图
var map = new AMap.Map('mapContainer', {
	view: new AMap.View2D({
		center: new AMap.LngLat(<%-shopRs[0].lng%>, <%-shopRs[0].lat%>),
		zoom: 18
	})
});
var marker = new AMap.Marker({                 
		  map:map,                 
		  position: [<%-shopRs[0].lng%>, <%-shopRs[0].lat%>],  
		  title:"<%-shopRs[0].shopname%>",
		  icon:"http://webapi.amap.com/images/0.png",
		  offset:new AMap.Pixel(-10, -20)
	   });
marker.setLabel({
	        offset: new AMap.Pixel(-20, -20),
	        content: "<%-shopRs[0].shopname%>"
	    }); 

AMap.plugin(['AMap.ToolBar','AMap.Scale','AMap.OverView'],
    function(){
        map.addControl(new AMap.ToolBar());

        map.addControl(new AMap.Scale());

        map.addControl(new AMap.OverView({isOpen:true}));
});

function eventHandler(e){
	alert(e.lng);
	pubform.lng.value=e.lnglat.getLng();
	pubform.lat.value=e.lnglat.getLat();
	$('#myModal').modal('show');
}
//var listener = AMap.event.addListener(map,"click",eventHandler);
</script>